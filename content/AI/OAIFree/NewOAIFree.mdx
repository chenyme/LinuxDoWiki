<br></br>

import Link from 'next/link';
import Image from 'next/image';
import { Callout } from 'nextra/components';
import { TopicHoverCard } from '@/components/common/TopicHoverCard'
import { CodeTabs } from '@/components/animate-ui/components/code-tabs';

# 新版镜像 OAIFree

<Callout type="error">
    2024年11月27日，OAIFree 宣布关停，详情见 
    
    <TopicHoverCard topicId="272012" defaultTitle="there is no wall" />
</Callout>

## 功能介绍

同样，看这名字就知道是镜像服务的最新版本-OAIFree，这个版本有着和官网一样的全新UI。恐怖的是：**官网有的它都有，官网没有的它还有！**

- 支持共享令牌，用户会话隔离。
- 纯净，没有臃肿的系统提示词。
- 完美使用 GPT4o-mini，GPT4o，GPT4 和 GPTs。
- 完全免翻，输入Token即可直接使用。
- 支持和ChatGPT语音对话。
- ...

<br></br>
<Image src="/oaifree.png" width={1206} height={708} alt="oaifree"/>

## 使用方式

### Token登录

 - 通过始皇的<Link href="https://token.oaifree.com/auth" target="_blank" className="text-blue-500"> Access Token </Link>服务获取 Access Token

 - 使用 Access Token 在始皇的<Link href="https://chat.oaifree.com/token" target="_blank" className="text-blue-500"> Share Token </Link>服务获取 Share Token（**可选**）

 - 打开<Link href="https://new.oaifree.com" target="_blank" className="text-blue-500"> new.oaifree.com </Link>，填入 Access Token 或者 Share Token，即可使用！

### Share Token 拼接

链接格式：https://`<yourdomain>`/auth/login_share?token=`<SHARE_TOKEN>`

 - 自行替换 YOURDOMAIN 为你的域名，SHARE_TOKEN 为你的 Share Token。

### Oauth 获取链接

<br></br>

<CodeTabs
  codes={{
    Curl: `curl 'https://YOURDOMAIN/api/auth/oauth_token' \\
    -H 'Origin: https://YOURDOMAIN' \\
    -H 'Content-Type: application/json' \\
    -d '{
        "share_token": SHARE_TOKEN
    }'`,
    Python: `import requests

domain = 'YOURDOMAIN' # 例如：new.oaifree.com
share_token = 'SHARE_TOKEN' # 通过 Share Token 服务获取

url = f'https://{domain}/api/auth/oauth_token'
headers = {
    'Origin': f'https://{domain}',
    'Content-Type': 'application/json'
}
data = {
    'share_token': share_token
}

response = requests.post(url, headers=headers, json=data)
response.json().get('login_url')`,
    Javascript: `const domain = 'YOURDOMAIN'; // 例如：new.oaifree.com
const shareToken = 'SHARE_TOKEN'; // 通过 Share Token 服务获取

const url = \`https://\${domain}/api/auth/oauth_token\`;
const headers = {
    'Origin': \`https://\${domain}\`,
    'Content-Type': 'application/json'
};
const data = {
    'share_token': shareToken
};

fetch(url, {
    method: 'POST',
    headers: headers,
    body: JSON.stringify(data)
})
.then(response => response.json())
.then(data => {
    const loginUrl = data.login_url;
    // 这里可以进一步处理 loginUrl
})
.catch(error => {
    // 处理错误
});`
  }}
/>

## 反代镜像服务

<br></br>

<CodeTabs
  codes={{
    "Cloudflare Worker": `export default {
    async fetch(request, env) {
    const url = new URL(request.url);
    url.host = 'new.oaifree.com';
    return fetch(new Request(url, request))
  }
}
`,
    "Nginx": `location / {
    proxy_pass https://new.oaifree.com;
    proxy_ssl_server_name on;
}
`
  }}
/>


